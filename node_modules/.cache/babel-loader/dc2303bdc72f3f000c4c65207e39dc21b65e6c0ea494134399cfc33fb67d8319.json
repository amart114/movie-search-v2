{"ast":null,"code":"import _toConsumableArray from\"/Users/anthony/repos/movie-search-v2/movie-search-cra/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/anthony/repos/movie-search-v2/movie-search-cra/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import starIcon from\"./images/star-icon.png\";import addIcon from\"./images/add-icon.png\";import minusIcon from\"./images/minus-icon.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Context=/*#__PURE__*/React.createContext();function ContextProvider(_ref){var children=_ref.children;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userSearch=_useState2[0],setUserSearch=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),searchSubmit=_useState4[0],setSearchSubmit=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),movieData=_useState6[0],setMovieData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),watchlist=_useState8[0],setWatchlist=_useState8[1];useEffect(function(){fetch(\"https://api.themoviedb.org/3/search/movie?api_key=bc1d2f76e11a46c1cc9ef0ee7ce8670a&query=\".concat(userSearch)).then(function(res){return res.json();}).then(function(data){return setMovieData(data.results);});},[userSearch]);function handleChange(e){setSearchSubmit(false);setUserSearch(e.target.value);}function handleSubmit(e){e.preventDefault();setSearchSubmit(true);}function addToWatchlist(film){// localStorage.setItem(\"films\", JSON.stringify(film))\nsetWatchlist(function(prevList){return[].concat(_toConsumableArray(prevList),[film]);});}function removeFromWatchlist(id){// localStorage.removeItem(`films`)\nsetWatchlist(function(prevList){return prevList.filter(function(film){return film.id!==id;});});}function renderSearchResults(data){return data.map(function(film){function toggleWatchIcon(id){var alreadyInWatchlist=watchlist.some(function(film){return film.id===id;});if(alreadyInWatchlist){return/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return removeFromWatchlist(film.id);},children:[/*#__PURE__*/_jsx(\"img\",{src:minusIcon,alt:\"\"}),\"Remove From Watchlist\"]});}else{return/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return addToWatchlist(film);},children:[/*#__PURE__*/_jsx(\"img\",{src:addIcon,alt:\"\"}),\"Add To Watchlist\"]});}}return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/w300\".concat(film.poster_path),alt:\"movie poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title-rating\",children:[/*#__PURE__*/_jsx(\"h3\",{children:film.original_title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"img\",{src:starIcon,alt:\"star\"}),film.vote_average]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"release-addWatchlist\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Release Date: \",film.release_date]}),toggleWatchIcon(film.id)]}),/*#__PURE__*/_jsx(\"p\",{children:film.overview})]})]});});}function renderWatchlist(data){return data.map(function(film){return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/w300\".concat(film.poster_path),alt:\"movie poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title-rating\",children:[/*#__PURE__*/_jsx(\"h3\",{children:film.original_title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"img\",{src:starIcon,alt:\"star\"}),film.vote_average]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"release-addWatchlist\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Release Date: \",film.release_date]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return removeFromWatchlist(film.id);},children:[/*#__PURE__*/_jsx(\"img\",{src:minusIcon,alt:\"\"}),\"Remove From Watchlist\"]})]}),/*#__PURE__*/_jsx(\"p\",{children:film.overview})]})]});});}return/*#__PURE__*/_jsx(Context.Provider,{value:{userSearch:userSearch,searchSubmit:searchSubmit,movieData:movieData,watchlist:watchlist,handleChange:handleChange,handleSubmit:handleSubmit,renderSearchResults:renderSearchResults,renderWatchlist:renderWatchlist},children:children});}export{ContextProvider,Context};","map":{"version":3,"names":["React","useState","useEffect","starIcon","addIcon","minusIcon","Context","createContext","ContextProvider","children","userSearch","setUserSearch","searchSubmit","setSearchSubmit","movieData","setMovieData","watchlist","setWatchlist","fetch","then","res","json","data","results","handleChange","e","target","value","handleSubmit","preventDefault","addToWatchlist","film","prevList","removeFromWatchlist","id","filter","renderSearchResults","map","toggleWatchIcon","alreadyInWatchlist","some","poster_path","original_title","vote_average","release_date","overview","renderWatchlist"],"sources":["/Users/anthony/repos/movie-search-v2/movie-search-cra/src/Context.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\"\n\nimport starIcon from \"./images/star-icon.png\"\nimport addIcon from \"./images/add-icon.png\"\nimport minusIcon from \"./images/minus-icon.png\"\n\nconst Context = React.createContext()\n\nfunction ContextProvider({children}) {\n    const [userSearch, setUserSearch] = useState(\"\")\n    const [searchSubmit, setSearchSubmit] = useState(false)\n    const [movieData, setMovieData] = useState([])\n    const [watchlist, setWatchlist] = useState([])\n\n    useEffect(() => {\n        fetch(`https://api.themoviedb.org/3/search/movie?api_key=bc1d2f76e11a46c1cc9ef0ee7ce8670a&query=${userSearch}`)\n        .then(res => res.json())\n        .then(data => setMovieData(data.results))\n    }, [userSearch])\n\n    function handleChange(e) {\n        setSearchSubmit(false)\n        setUserSearch(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault()\n        setSearchSubmit(true)\n    }\n\n    function addToWatchlist(film) {\n        // localStorage.setItem(\"films\", JSON.stringify(film))\n        setWatchlist(prevList => [...prevList, film])\n    }\n\n    function removeFromWatchlist(id) {\n        // localStorage.removeItem(`films`)\n        setWatchlist(prevList => prevList.filter(film => film.id !== id))\n    }\n    \n\n    function renderSearchResults(data) {\n        return data.map(film => {\n\n            function toggleWatchIcon(id) {\n                const alreadyInWatchlist = watchlist.some(film => film.id === id)\n                if (alreadyInWatchlist) {\n                    return (\n                        <button onClick={() => removeFromWatchlist(film.id)}><img src={minusIcon} alt=\"\" />Remove From Watchlist</button>\n                    )\n                } else {\n                    return (\n                        <button onClick={() => addToWatchlist(film)}><img src={addIcon} alt=\"\"/>Add To Watchlist</button>\n                    )\n                }\n            }\n\n            return (\n                <div className=\"movie-item\">\n\n                    <img src={`https://image.tmdb.org/t/p/w300${film.poster_path}`} alt = \"movie poster\"/>\n\n                    <div className=\"movie-details\">\n                        <div className=\"title-rating\">\n                            <h3>{film.original_title}</h3>\n                            <p><img src={starIcon} alt=\"star\"/>{film.vote_average}</p>\n                        </div>\n\n                        <div className=\"release-addWatchlist\">\n                            <p>Release Date: {film.release_date}</p>\n                            {toggleWatchIcon(film.id)}\n                        </div>\n                        \n                        <p>{film.overview}</p>\n                    </div>\n\n                </div>\n                \n            )\n        })\n    }\n\n    function renderWatchlist(data) {\n        return data.map(film => {\n                return (\n                    <div className=\"movie-item\">\n    \n                        <img src={`https://image.tmdb.org/t/p/w300${film.poster_path}`} alt = \"movie poster\"/>\n    \n                        <div className=\"movie-details\">\n                            <div className=\"title-rating\">\n                                <h3>{film.original_title}</h3>\n                                <p><img src={starIcon} alt=\"star\"/>{film.vote_average}</p>\n                            </div>\n    \n                            <div className=\"release-addWatchlist\">\n                                <p>Release Date: {film.release_date}</p>\n                                <button onClick={()=>removeFromWatchlist(film.id)}><img src={minusIcon} alt=\"\"/>Remove From Watchlist</button>\n                            </div>\n                            \n                            <p>{film.overview}</p>\n                        </div>\n    \n                    </div>\n                    \n                ) \n        })\n    }\n\n    \n\n    return (\n        <Context.Provider value={{\n            userSearch,\n            searchSubmit,\n            movieData,\n            watchlist,\n            handleChange,\n            handleSubmit,\n            renderSearchResults,\n            renderWatchlist\n        }}>\n            {children}\n        </Context.Provider>\n    )\n}\n\nexport {ContextProvider, Context}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}